Title: AWS S3
Date: 2022-09-08
Category: Backend
Tags: AWS
Author: Yoga

## AWS CLI

https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/welcome-examples.html

document: https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3/index.html

### 安装

下载 macOS pkg 文件：https://awscli.amazonaws.com/AWSCLIV2.pkg

```
$ which aws
```

### 配置

```
$ aws configure
AWS Access Key ID [None]: xxx
AWS Secret Access Key [None]: xxx
Default region name [None]: ap-southeast-1
Default output format [None]: json
```

### 使用

* Listing all user owned buckets
```bash
aws s3 ls
```
* Listing all prefixes and objects in a bucket
```bash
aws s3 ls s3://<bucketname>
```

* Copying a local file to S3
```bash
aws s3 cp ./teacher.xlsx s3://<bucketname>
```
___

## crontab (Linux / Mac)

新建task.sh脚本
```bash
vi task.sh

aws s3 cp ./teacher.xlsx s3://<bucketname>
aws s3 ls s3://<bucketname>

chmod 755 task.sh
```

打开定时任务
```bash
crontab -e # 编辑定时任务

* * * * * /Users/yoga/Desktop/DnA/crontab/task.sh # 每分钟执行一次

crontab -l # 查看当前定时任务

# sudo cron start # 开始

crontab -r # 删除定时任务
```

踩坑：You have new mail in /var/mail/yoga

Operation not permitted

1. 系统偏好设置->安全性和隐私->完全磁盘访问权限
2. which crontab 复制路径
3. 单击 +，同时按住command+shift+g，添加/usr/bin/crontab; /usr/sbin/cron

---

## Windows 定时任务

1. 新建txt

```bat
@echo off # 关闭回显
echo Hello World
pause
```
修改文件后缀 .txt -> .bat

双击试运行

2. 创建定时任务

右键windows图标 -> 计算机管理 -> 任务计划程序 -> 创建任务

常规：名称

触发器：一次 选择开始时间

操作：选中脚本位置

条件：只有在计算机使用交流电源时才启动任务（取消勾选）